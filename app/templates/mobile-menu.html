{% load static %}

<!-- Mobile Navigation Menu - Placed directly under body to avoid stacking context -->
<div id="mobileMenu" class="mobile-menu-wrapper hidden">
  <!-- Semi-transparent overlay -->
  <div class="mobile-menu-overlay"></div>
  
  <!-- Menu panel -->
  <div class="mobile-panel">
    <!-- Close Button -->
    <div class="flex justify-end p-4 border-b border-gray-200">
      <button id="closeMobileMenuBtn" type="button" class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition" style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 24px;">
        âœ•
      </button>
    </div>
    
    <!-- Mobile Menu Content -->
    <div class="flex flex-col h-full">
      <div class="flex-1 overflow-y-auto p-4">
        <!-- User Profile Section -->
        <div class="mb-6">
          {% if user.is_authenticated %}
            <div class="flex items-center space-x-3 p-3 bg-yellow-50 rounded-lg">
              <div class="w-10 h-10 bg-yellow-600 text-white rounded-full flex items-center justify-center font-bold text-sm">
                {{ user.get_full_name|default:user.email|slice:":1"|upper }}
              </div>
              <div class="flex-1">
                <p class="font-semibold text-gray-800">{{ user.get_full_name|default:user.email }}</p>
                <p class="text-sm text-gray-600">{{ user.email }}</p>
              </div>
            </div>
            <div class="mt-3">
              <a href="{% url 'logout' %}" class="flex items-center space-x-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
              </a>
            </div>
          {% else %}
            <a href="{% url 'login' %}" class="flex items-center space-x-2 w-full px-3 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition">
              <i class="fas fa-user"></i>
              <span>Login / Sign Up</span>
            </a>
          {% endif %}
        </div>

        <!-- Mobile Search Bar -->
        <div class="relative mb-6">
          <input
            type="text"
            placeholder="Search suppliers..."
            class="w-full py-1.5 pl-3 pr-10 rounded-full text-[#000000] bg-[#FFF9E5] border-2 border-[#fbbf24] focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:border-transparent search-box text-sm"
          />
          <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-yellow-700 hover:text-yellow-800 text-sm" title="Search">
            <i class="fas fa-search"></i>
          </button>
        </div>

        <!-- Navigation Links -->
        <nav class="space-y-1">
          <a href="{% url 'index' %}" class="mobile-menu-link flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-900 hover:text-yellow-700 hover:bg-yellow-50 rounded-lg transition">
            <i class="fas fa-home w-5"></i>
            <span>Home</span>
          </a>
          <a href="{% url 'about' %}" class="mobile-menu-link flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-900 hover:text-yellow-700 hover:bg-yellow-50 rounded-lg transition">
            <i class="fas fa-info-circle w-5"></i>
            <span>About</span>
          </a>
          <a href="{% url 'category' %}" class="mobile-menu-link flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-900 hover:text-yellow-700 hover:bg-yellow-50 rounded-lg transition">
            <i class="fas fa-th-large w-5"></i>
            <span>Categories</span>
          </a>
          <a href="{% url 'cia_networks' %}" class="mobile-menu-link flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-900 hover:text-yellow-700 hover:bg-yellow-50 rounded-lg transition">
            <i class="fas fa-building w-5"></i>
            <span>Suppliers</span>
          </a>
          {% if user.is_authenticated %}
          <a href="{% url 'profile' %}" class="mobile-menu-link flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-900 hover:text-yellow-700 hover:bg-yellow-50 rounded-lg transition">
            <i class="fas fa-user-circle w-5"></i>
            <span>My Profile</span>
          </a>
          {% endif %}
        </nav>
      </div>

      <!-- Mobile Menu Footer -->
      <div class="border-t border-gray-200 p-4">
        <!-- Language Selector -->
        <div class="mb-4">
          <div id="mobileLanguageToggle" class="flex items-center justify-between w-full px-3 py-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
            <div class="flex items-center space-x-2">
              <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets%2F8b4537dd3fc94785bf1c6169a3c80769%2Fe2eef99b80e945699b2f2503b5a83ffa?format=webp&width=800" 
                  alt="Language" 
                  class="w-5 h-5">
              <span class="font-medium">Language</span>
            </div>
            <!-- Language toggle (desktop version embedded here) -->
            <div class="flex items-center space-x-1">
              <button id="translate-en-mobile" 
                      class="translate-btn px-2 py-0.5 text-xs font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition active">
                EN
              </button>
              <button id="translate-ta-mobile" 
                      class="translate-btn px-2 py-0.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100 transition">
                TA
              </button>
            </div>
          </div>
        </div>

        <!-- Contact Info -->
        <div class="text-center text-sm text-gray-500">
          <p>&copy; 2025 CIA MachineryHub</p>
          <p>All rights reserved</p>
        </div>
      </div>
    </div>
  </div>
</div>
